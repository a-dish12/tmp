{% extends 'base_content.html' %}
{% block content %}
<div class="container">
  <div class="row">
    <div class="col-12">
      <h1>Welcome to your dashboard {{ user.username }}</h1>

       <div class="mt-4">
          <a href="{% url 'create_recipe' %}" class="btn btn-primary btn-lg me-3">
            Create New Recipe
          </a>
          <a href="{% url 'user_recipes' %}" class="btn btn-secondary btn-lg">
            My Recipes
          </a>
          <a class="btn btn-primary dropdown-toggle" href="#" id="time-filter-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Sort by Time
          </a>
          <ul class="dropdown-menu" aria-labelledby="time-filter-dropdown">
            <li><a class="dropdown-item" href="{% url 'dashboard' %}?max_time=20">20 mins or Less</a></li>
            <li><a class="dropdown-item" href="{% url 'dashboard' %}?max_time=45">45 mins or Less</a></li>
            <li><a class="dropdown-item" href="{% url 'dashboard' %}?max_time=60">60 mins or Less</a></li>
            <li><a class="dropdown-item" href="{% url 'dashboard' %}?max_time=90">90 mins or Less</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="{% url 'dashboard' %}?min_time=90">Over 90 mins</a></li>
            <li><a class="dropdown-item" href="{% url 'dashboard' %}">All Recipes</a></li>
          </ul>
      </div>


      <h2 class="list-title mt-5">Explore Recipes from Others</h2>
      
      {% if recipes %}
        <div class="list-group">
          {% for recipe in recipes %}
            <div class="list-group-item">
              <h5>{{ recipe.title }}</h5>
              <p class="low-key">{{ recipe.description|truncatewords:20 }}</p>
              <small class="text-muted">
                By {{ recipe.author.username }} | 
                Prep time: {{ recipe.time }} minutes | 
                Created: {{ recipe.created_at|date:"M d, Y" }}
              </small>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="low-key">No recipes available from other users yet.</p>
      {% endif %}

    </div>
  </div>
</div>
{% endblock %}