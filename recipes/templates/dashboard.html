{% extends 'base_content.html' %}
{% block content %}
<div class="container">
  <div class="row">
    <div class="col-12">
      <h1>Welcome to your dashboard {{ user.username }}</h1>

       <div class="mt-4 d-flex align-items-center gap-3 flex-wrap">
          <a href="{% url 'create_recipe' %}" class="btn btn-primary btn-lg me-3">
            Create New Recipe
          </a>
          <a href="{% url 'user_recipes' %}" class="btn btn-secondary btn-lg">
            My Recipes
          </a>
          <!-- Search Form -->
          <form method="get" action="" class="d-flex ms-auto">
            <input 
            type="text"
            name="search"
            class="form-control me-2"
            style="min-width: 250px;"
            placeholder="Search recipe name..."
            value="{{request.GET.Search}}">
            <button type="submit" class = "btn btn-outline-primary btn-lg">
              Search
            </button>
          </form>
      </div>


      <h2 class="list-title mt-5">Explore Recipes from Others</h2>
      
      {% if recipes %}
        <div class="list-group">
          {% for recipe in recipes %}
            <div class="list-group-item">
              <h5>{{ recipe.title }}</h5>
              <p class="low-key">{{ recipe.description|truncatewords:20 }}</p>
              <small class="text-muted">
                By {{ recipe.author.username }} | 
                Prep time: {{ recipe.time }} minutes | 
                Created: {{ recipe.created_at|date:"M d, Y" }}
              </small>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="low-key">No recipes available from other users yet.</p>
      {% endif %}

    </div>
  </div>
</div>
{% endblock %}